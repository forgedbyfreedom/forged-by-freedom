{"version":3,"sources":["../../cli-astro-commands/src/components/DevCommand/index.ts","../../cli-astro-commands/src/components/DevCommand/DevCommand.tsx","../../cli-astro-commands/src/components/DevCommand/utils/runAstroDev.ts","../../cli-astro-commands/src/components/DevCommand/utils/createAstroLogger.tsx","../../cli-astro-commands/src/components/DevCommand/hooks/useFetchDevMetadata.ts","../../cli-astro-commands/src/components/DevCommand/SiteDevFlow.tsx","../../cli-astro-commands/src/components/DevCommand/DevScreenBorder.tsx","../../cli-astro-commands/src/components/DevCommand/SiteDev.tsx","../../cli-astro-commands/src/components/DevCommand/hooks/useDevCenterUpdater.ts","../../cli-astro-commands/src/components/DevCommand/hooks/useFetchAppManifest.ts","../../cli-astro-commands/src/components/DevCommand/utils/isTunnelRequired.ts","../../cli-astro-commands/src/components/DevCommand/TunnelingConsent.tsx","../../cli-astro-commands/src/components/DevCommand/AppDevFlow.tsx","../../cli-astro-commands/src/components/DevCommand/app-flow/AppDev.tsx","../../cli-astro-commands/src/components/DevCommand/app-flow/screen-state.ts","../../cli-astro-commands/src/components/DevCommand/app-flow/SiteSelectorScreen.tsx","../../cli-astro-commands/src/components/CloseScreen/index.tsx","../../cli-astro-commands/src/components/CloseScreen/CloseScreen.tsx","../../cli-astro-commands/src/components/DevCommand/app-flow/HomeScreen.tsx","../../cli-astro-commands/src/components/DevCommand/app-flow/SwitchSite.tsx"],"sourcesContent":["export { DevCommand } from './DevCommand.js';\n","import React, { useEffect, useMemo, useRef } from 'react';\nimport type { FC } from 'react';\nimport { useAsync } from '@wix/cli-ui-kit';\nimport { createPackageManager, getRepoType } from '@wix/package-manager';\nimport { useProjectModel } from '../../model.js';\nimport {\n  runAstroDev,\n  EVENT_LINE,\n  EVENT_SERVER_ADDRESS,\n} from './utils/runAstroDev.js';\nimport { createAstroLogger } from './utils/createAstroLogger.js';\nimport { useFetchDevMetadata } from './hooks/useFetchDevMetadata.js';\nimport { SiteDevFlow } from './SiteDevFlow.js';\nimport { AppDevFlow } from './AppDevFlow.js';\nimport { SiteProvider } from '../../site/index.js';\n\ninterface DevCommandProps {\n  port?: number;\n  allowedHosts?: string;\n  serverExposedUrl?: string;\n}\n\nexport const DevCommand: FC<DevCommandProps> = ({\n  port,\n  allowedHosts,\n  serverExposedUrl,\n}) => {\n  const {\n    model: { config, projectFolder },\n  } = useProjectModel();\n\n  const logger = useMemo(() => createAstroLogger(false), []);\n\n  const astroProcess = useRef<ReturnType<typeof runAstroDev>>();\n\n  const fetchDevMetadataAction = useFetchDevMetadata();\n\n  useAsync(async () => {\n    const repoType = await getRepoType(projectFolder);\n    const packageManager = await createPackageManager(repoType);\n\n    const astro = runAstroDev({\n      packageManager,\n      projectFolder,\n      port,\n      allowedHosts,\n    });\n\n    astroProcess.current = astro;\n\n    astro.stdout?.once(EVENT_SERVER_ADDRESS, (address: string) => {\n      void fetchDevMetadataAction.execute(address);\n    });\n\n    astro.stdout?.on(EVENT_LINE, (line: string) => logger.log(line));\n    astro.stderr?.on(EVENT_LINE, (line: string) => logger.log(line));\n  }, []);\n\n  useEffect(() => {\n    return () => {\n      if (astroProcess.current?.pid) {\n        try {\n          astroProcess.current.kill('SIGTERM');\n        } catch {\n          // Sometimes child process might exit or be killed from outside.\n          // We don't want to report an error in case we fail to kill the child process.\n        }\n      }\n    };\n  }, []);\n\n  return (\n    <SiteProvider>\n      {config.projectType === 'Site' ? (\n        <SiteDevFlow\n          devMetadataStatus={fetchDevMetadataAction.status}\n          serverExposedUrl={serverExposedUrl}\n        />\n      ) : (\n        <AppDevFlow\n          devMetadataStatus={fetchDevMetadataAction.status}\n          serverExposedUrl={serverExposedUrl}\n        />\n      )}\n    </SiteProvider>\n  );\n};\n","import { execa } from 'execa';\nimport type { IPackageManager } from '@wix/package-manager';\nimport stripAnsi from 'strip-ansi';\n\nexport const EVENT_LINE = 'line';\nexport const EVENT_SERVER_ADDRESS = 'server_address';\n\nexport function runAstroDev({\n  packageManager,\n  projectFolder,\n  port,\n  allowedHosts,\n}: {\n  packageManager: IPackageManager;\n  projectFolder: string;\n  port?: number;\n  allowedHosts?: string;\n}) {\n  const binaryArgs = ['astro', 'dev'];\n\n  if (port) {\n    binaryArgs.push('--port', `${port}`);\n  }\n\n  if (allowedHosts) {\n    binaryArgs.push('--allowed-hosts', allowedHosts);\n  }\n\n  const { file, args } = packageManager.getRunBinaryCmd(binaryArgs);\n\n  const result = execa(file, args, {\n    cwd: projectFolder,\n    stdio: 'pipe',\n    env: { FORCE_COLOR: '1' },\n    cleanup: true,\n    windowsHide: false,\n  });\n\n  let stdoutBuffer = '';\n\n  result.stdout?.on('data', (chunk) => {\n    stdoutBuffer += chunk.toString();\n    const lines = stdoutBuffer.split('\\n');\n\n    stdoutBuffer = lines.pop() ?? '';\n    for (const line of lines) {\n      result.stdout?.emit(EVENT_LINE, line);\n      if (line.includes('http://')) {\n        const match = /(http:\\/\\/[^\\s]+)/.exec(line);\n        if (match?.[1]) {\n          const address = stripAnsi(match[1]).trim();\n          result.stdout?.emit(EVENT_SERVER_ADDRESS, address);\n        }\n      }\n    }\n  });\n\n  let stdErrBuffer = '';\n\n  result.stderr?.on('data', (chunk) => {\n    stdErrBuffer += chunk.toString();\n    const lines = stdErrBuffer.split('\\n');\n\n    stdErrBuffer = lines.pop() ?? '';\n    for (const line of lines) {\n      result.stderr?.emit(EVENT_LINE, line);\n    }\n  });\n\n  return result;\n}\n","import React from 'react';\nimport type { ReactElement } from 'react';\nimport { createRendererToString, Text } from '@wix/cli-ui-kit';\n\ninterface Logger {\n  log: (msg: string | ReactElement) => void;\n}\n\nconst dateTimeFormat = new Intl.DateTimeFormat([], {\n  hour: '2-digit',\n  minute: '2-digit',\n  second: '2-digit',\n  hour12: false,\n});\n\nexport function createAstroLogger(isPrefixed = true): Logger {\n  const renderer = createRendererToString({ stripAnsi: false });\n  const log = (msg: string | ReactElement) => {\n    if (typeof msg === 'string') {\n      // eslint-disable-next-line no-console\n      setTimeout(() => console.log(msg), 0);\n    } else {\n      // eslint-disable-next-line no-console\n      setTimeout(() => console.log(renderer.render(msg)), 0);\n    }\n  };\n\n  const prefixedLog = (msg: string | ReactElement) => {\n    const timestamp = dateTimeFormat.format(new Date());\n    const log = (\n      <Text>\n        <Text>{timestamp} </Text>\n        <Text skin=\"info\">[wix] </Text>\n        <Text>{msg}</Text>\n      </Text>\n    );\n\n    // eslint-disable-next-line no-console\n    console.log(renderer.render(log));\n  };\n\n  return isPrefixed ? { log: prefixedLog } : { log };\n}\n","import { useHttpClient } from '@wix/cli-http-client-react';\nimport { devMetadataSchema } from '@wix/cli-astro-definitions';\nimport { useAsyncCallback } from '@wix/cli-ui-kit';\n\nexport function useFetchDevMetadata() {\n  const http = useHttpClient({ type: 'standalone' });\n\n  return useAsyncCallback(async (_, serverLocalUrl: string) => {\n    const url = new URL('/_wix/dev-metadata.json', serverLocalUrl);\n    try {\n      const { data } = await http.get(url.toString());\n      return {\n        devMetadata: devMetadataSchema.parse(data),\n        serverLocalUrl,\n      };\n    } catch {\n      return {\n        devMetadata: null,\n        serverLocalUrl,\n      };\n    }\n  });\n}\n","import React from 'react';\nimport type { FC } from 'react';\nimport type { AsyncCallbackStatus } from '@wix/cli-ui-kit';\nimport { Spinner } from '@wix/cli-ui-kit';\nimport type { DevMetadata } from '@wix/cli-astro-definitions';\nimport { SiteAuthProvider } from '@wix/cli-auth';\nimport { match } from 'variant';\nimport { DevScreenBorder } from './DevScreenBorder.js';\nimport { useSite } from '../../site/index.js';\nimport { SiteDev } from './SiteDev.js';\n\ninterface SiteDevScreenProps {\n  devMetadataStatus: AsyncCallbackStatus<{\n    devMetadata: DevMetadata | null;\n    serverLocalUrl: string;\n  }>;\n  serverExposedUrl?: string;\n}\n\nexport const SiteDevFlow: FC<SiteDevScreenProps> = ({\n  devMetadataStatus,\n  serverExposedUrl,\n}) => {\n  const { site } = useSite();\n  return (\n    <SiteAuthProvider siteId={site.id}>\n      {match(devMetadataStatus, {\n        NotRequested: () => <Spinner text=\"Starting dev environment...\" />,\n        Error: () => null,\n        Loading: () => <Spinner text=\"Checking dev environment settings...\" />,\n        Success: ({ result: { devMetadata, serverLocalUrl } }) => (\n          <DevScreenBorder>\n            <SiteDev\n              devMetadata={devMetadata}\n              serverLocalUrl={serverLocalUrl}\n              serverExposedUrl={serverExposedUrl}\n            />\n          </DevScreenBorder>\n        ),\n      })}\n    </SiteAuthProvider>\n  );\n};\n","import React from 'react';\nimport { Box } from '@wix/cli-ui-kit';\nimport type { FC, ReactNode } from 'react';\n\nexport const DevScreenBorder: FC<{ children: ReactNode }> = ({ children }) => {\n  return (\n    <Box\n      flexDirection=\"column\"\n      borderTop\n      borderLeft={false}\n      borderBottom={false}\n      borderRight={false}\n      borderStyle=\"round\"\n      borderColor=\"blueBright\"\n      width=\"95%\"\n    >\n      {children}\n    </Box>\n  );\n};\n","import React from 'react';\nimport type { FC } from 'react';\nimport type { DevMetadata } from '@wix/cli-astro-definitions';\nimport { Box, Spinner, Text } from '@wix/cli-ui-kit';\nimport { useSite } from '../../site/useSite.js';\nimport { PlatformLink } from '../PlatformLink/PlatformLink.js';\nimport { useDevCenterUpdater } from './hooks/useDevCenterUpdater.js';\nimport { TunnelingConsent } from './TunnelingConsent.js';\n\ninterface SiteDevProps {\n  serverLocalUrl: string;\n  serverExposedUrl?: string;\n  devMetadata: DevMetadata | null;\n}\n\nexport const SiteDev: FC<SiteDevProps> = ({\n  serverLocalUrl,\n  serverExposedUrl,\n  devMetadata,\n}) => {\n  const { site } = useSite();\n  const { tunnelRequired, devArmTag } = useDevCenterUpdater({\n    serverLocalUrl,\n    serverExposedUrl,\n    devMetadata,\n  });\n\n  return (\n    <>\n      <Text>Development environment ready</Text>\n      <Box rowGap={1} marginY={1} flexDirection=\"column\">\n        <TunnelingConsent required={tunnelRequired}>\n          <Text>Open the preview on:</Text>\n          <Box paddingLeft={2} flexDirection=\"column\">\n            <PlatformLink url={serverLocalUrl} label={'Site'} />\n            {devArmTag ? (\n              <PlatformLink\n                url={`https://manage.wix.com/dashboard/${site.id}?apps-override=${devArmTag}`}\n                label={'Dashboard'}\n              />\n            ) : (\n              <Spinner text={'Preparing your dashboard...'} />\n            )}\n          </Box>\n        </TunnelingConsent>\n      </Box>\n    </>\n  );\n};\n","import { isDeepStrictEqual } from 'node:util';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { fields, isType, variant } from 'variant';\nimport type { LooseAppManifest } from '@wix/cli-app-manifest';\nimport { useDebugLog } from '@wix/cli-debug-log';\nimport { useARMClient } from '@wix/arm-client';\nimport { useTunnel } from '@wix/cli-tunnel';\nimport { readUserConfig } from '@wix/cli-user-config';\nimport { PlatformType } from '@wix/cli-astro-definitions';\nimport type { DevMetadata } from '@wix/cli-astro-definitions';\nimport { readAppConfig, saveAppConfig } from '../../../files/app.config.js';\nimport { useProjectModel } from '../../../model.js';\nimport { createAstroLogger } from '../utils/createAstroLogger.js';\nimport { useUpdateManifest } from '../../PreviewCommand/hooks/useUpdateManifest.js';\nimport { useFetchAppManifest } from './useFetchAppManifest.js';\nimport { useUpdateDeploymentTopology } from '../../../hooks/useUpdateDeploymentTopology.js';\nimport { useResolvePlatformUrl } from '../../PreviewCommand/app-flow/useResolvePlatformUrl.js';\n\nconst DevCenterUpdateResult = variant({\n  Changed: fields<{ armTagChanged: boolean }>(),\n  Unchanged: {},\n});\n\nexport const useDevCenterUpdater = ({\n  serverLocalUrl,\n  serverExposedUrl,\n  devMetadata,\n}: {\n  serverLocalUrl: string;\n  serverExposedUrl?: string;\n  devMetadata: DevMetadata | null;\n}) => {\n  const [devArmTag, setDevArmTag] = useState<string | undefined>();\n  const [manifest, setManifest] = useState<LooseAppManifest | null>(null);\n  const writeToDebugLog = useDebugLog();\n  const resolvePlatformUrl = useResolvePlatformUrl();\n\n  const {\n    model: {\n      config: { appId, projectType },\n      projectFolder,\n    },\n  } = useProjectModel();\n\n  const logger = useMemo(() => createAstroLogger(), []);\n  const { updateManifest } = useUpdateManifest();\n  const arm = useARMClient();\n  const updateDeploymentTopology = useUpdateDeploymentTopology();\n\n  const openTunnel = useTunnel();\n  const tunnelUrl = useRef<string>();\n  const [tunnelRequired, setTunnelRequired] = useState(false);\n\n  const fetchAppManifest = useFetchAppManifest();\n\n  const updateDevCenter = useCallback(async () => {\n    const baseUrl = serverExposedUrl ?? serverLocalUrl;\n\n    const { manifest: latestManifest, isTunnelRequired } =\n      await fetchAppManifest(\n        serverLocalUrl,\n        devMetadata,\n        baseUrl,\n        tunnelUrl.current ?? baseUrl\n      );\n\n    if (isDeepStrictEqual(manifest, latestManifest)) {\n      return DevCenterUpdateResult.Unchanged();\n    }\n\n    if (!serverExposedUrl && !tunnelUrl.current && isTunnelRequired) {\n      const config = await readUserConfig();\n      if (!config.tunneling) {\n        setTunnelRequired(true);\n        return DevCenterUpdateResult.Unchanged();\n      }\n\n      const serverLocalPort = parseInt(new URL(serverLocalUrl).port, 10);\n      const tunnel = await openTunnel(serverLocalPort);\n      tunnelUrl.current = tunnel.url;\n\n      return DevCenterUpdateResult.Unchanged();\n    }\n\n    const appConfig = await readAppConfig(projectFolder);\n\n    let updatedDevArmTag = appConfig?.devArmTag;\n    if (!updatedDevArmTag) {\n      updatedDevArmTag = await arm.createLooseAppRelease(\n        updateManifest(latestManifest, baseUrl, tunnelUrl.current),\n        appId\n      );\n    } else {\n      const updateState = await arm.updateLooseAppRelease(\n        updateManifest(latestManifest, baseUrl, tunnelUrl.current),\n        updatedDevArmTag\n      );\n      if (!isType(updateState, 'TagUpdated')) {\n        updatedDevArmTag = await arm.createLooseAppRelease(\n          updateManifest(latestManifest, baseUrl, tunnelUrl.current),\n          appId\n        );\n      }\n    }\n\n    if (updatedDevArmTag !== appConfig?.devArmTag) {\n      await saveAppConfig(projectFolder, { devArmTag: updatedDevArmTag });\n    }\n\n    setManifest(latestManifest);\n    setDevArmTag(updatedDevArmTag);\n\n    await updateDeploymentTopology.execute({\n      siteUrl:\n        projectType === 'Site'\n          ? baseUrl\n          : resolvePlatformUrl({\n              platformType: PlatformType.Site(),\n              armTag: updatedDevArmTag,\n            }),\n      armTag: updatedDevArmTag,\n      environment: 'development',\n    });\n\n    const armTagChanged =\n      !!appConfig?.devArmTag && updatedDevArmTag !== appConfig.devArmTag;\n    return DevCenterUpdateResult.Changed({ armTagChanged });\n  }, [\n    fetchAppManifest,\n    updateManifest,\n    serverLocalUrl,\n    serverExposedUrl,\n    arm,\n    manifest,\n    projectFolder,\n    appId,\n    updateDeploymentTopology,\n    openTunnel,\n    devMetadata,\n    projectType,\n    resolvePlatformUrl,\n  ]);\n\n  const [timer, setTimer] = useState(Date.now());\n\n  useEffect(() => {\n    let disposed = false;\n\n    void updateDevCenter()\n      .then((result) => {\n        if (isType(result, 'Changed')) {\n          logger.log(\n            'App Manifest updated. Refresh existing browser tabs to view the latest changes.'\n          );\n        }\n      })\n      .catch((error: unknown) => {\n        // TODO: need product decision on how to format/color the output\n        logger.log('Failed to update App Manifest');\n        logger.log(`${error}`);\n\n        writeToDebugLog(error);\n      })\n      .then(() => {\n        if (!disposed) {\n          setTimeout(() => setTimer(Date.now()), 1_000);\n        }\n      });\n    return () => {\n      disposed = true;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [timer]);\n\n  return { tunnelRequired, devArmTag };\n};\n","import { useCallback } from 'react';\nimport { parseLooseAppManifest } from '@wix/cli-app-manifest';\nimport type { DevMetadata } from '@wix/cli-astro-definitions';\nimport { useHttpClient } from '@wix/cli-http-client-react';\nimport { isTunnelRequired } from '../utils/isTunnelRequired.js';\n\nexport function useFetchAppManifest() {\n  const http = useHttpClient({ type: 'standalone' });\n\n  return useCallback(\n    async (\n      serverLocalUrl: string,\n      devMetadata: DevMetadata | null,\n      baseUrl: string,\n      tunnelUrl: string\n    ) => {\n      const url = new URL('/_wix/app-manifest.json', serverLocalUrl);\n      const { data: text } = await http.get<string>(url.toString(), {\n        responseType: 'text',\n        transitional: {\n          silentJSONParsing: true,\n          forcedJSONParsing: false,\n          clarifyTimeoutError: false,\n        },\n        disableWixHeaders: true,\n      });\n\n      if (devMetadata != null) {\n        const placeholders = new Map<string, string>();\n\n        placeholders.set(devMetadata.staticsUrlPlaceholder, baseUrl);\n        placeholders.set(devMetadata.serverUrlPlaceholder, tunnelUrl);\n\n        return {\n          manifest: parseLooseAppManifest(text, placeholders),\n          isTunnelRequired: text.includes(devMetadata.serverUrlPlaceholder),\n        };\n      }\n\n      const manifestV1 = parseLooseAppManifest(text);\n\n      return {\n        manifest: manifestV1,\n        isTunnelRequired: isTunnelRequired(manifestV1),\n      };\n    },\n    [http]\n  );\n}\n","import { looseComponentSchema } from '@wix/cli-app-manifest';\nimport type {\n  LooseAppManifest,\n  LooseBaseComponent,\n} from '@wix/cli-app-manifest';\nimport { ComponentType } from '@wix/ambassador-devcenter-apps-v1-app-old/types';\n\nexport function isTunnelRequired(appManifest: LooseAppManifest) {\n  for (const extension of appManifest.components) {\n    const knownAppManifest = parseKnownExtensionManifest(extension);\n\n    if (\n      knownAppManifest != null &&\n      knownAppManifest.compType === ComponentType.WEBHOOK\n    ) {\n      // User can specify his own callback URL.\n      // In such cases tunnel is not required even if webhook exists.\n      // CLI always creates a relative URL which is not parsable.\n      return !URL.canParse(knownAppManifest.compData.webhook.callbackUrl);\n    }\n  }\n\n  return false;\n}\n\nfunction parseKnownExtensionManifest(extensionManifest: LooseBaseComponent) {\n  const appManifestResult = looseComponentSchema.safeParse(extensionManifest);\n\n  if (appManifestResult.error) {\n    return null;\n  }\n\n  return appManifestResult.data;\n}\n","import React, { useState } from 'react';\nimport type { FC, ReactNode } from 'react';\nimport { match } from 'variant';\nimport { ConfirmInput, Text, useAsync, useExit } from '@wix/cli-ui-kit';\nimport { readUserConfig, updateUserConfig } from '@wix/cli-user-config';\n\ninterface Props {\n  children: ReactNode;\n  required: boolean;\n}\n\nexport const TunnelingConsent: FC<Props> = ({ required, children }) => {\n  const exit = useExit();\n  const [approved, setApproved] = useState<boolean>();\n\n  const { status } = useAsync(async () => {\n    const config = await readUserConfig();\n\n    if (config.tunneling) {\n      setApproved(true);\n    }\n\n    return config;\n  }, []);\n\n  if (!required || approved) {\n    return children;\n  }\n\n  return (\n    <>\n      {match(status, {\n        Success: () => (\n          <ConfirmInput\n            label={\n              \"To proceed, we'll set up a secure tunnel from your machine for development purposes\"\n            }\n            initialValue={true}\n            onSubmit={async (approved) => {\n              setApproved(approved);\n              await updateUserConfig({ tunneling: approved });\n              if (!approved) {\n                exit();\n              }\n            }}\n          />\n        ),\n        Error: () => null,\n        Loading: () => null,\n      })}\n      {approved === false && (\n        <Text skin=\"error\">\n          Operation aborted. Tunneling is necessary to run your application.\n        </Text>\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport type { FC } from 'react';\nimport { match } from 'variant';\nimport type { AsyncCallbackStatus } from '@wix/cli-ui-kit';\nimport type { DevMetadata } from '@wix/cli-astro-definitions';\nimport { Spinner } from '@wix/cli-ui-kit';\nimport { AppDev } from './app-flow/AppDev.js';\nimport { DevScreenBorder } from './DevScreenBorder.js';\n\ninterface AppDevScreenProps {\n  devMetadataStatus: AsyncCallbackStatus<{\n    devMetadata: DevMetadata | null;\n    serverLocalUrl: string;\n  }>;\n  serverExposedUrl?: string;\n}\n\nexport const AppDevFlow: FC<AppDevScreenProps> = ({\n  devMetadataStatus,\n  serverExposedUrl,\n}) => {\n  return match(devMetadataStatus, {\n    NotRequested: () => <Spinner text=\"Starting dev environment...\" />,\n    Error: () => null,\n    Loading: () => <Spinner text=\"Checking dev environment settings...\" />,\n    Success: ({ result: { devMetadata, serverLocalUrl } }) => {\n      return (\n        <DevScreenBorder>\n          <AppDev\n            serverLocalUrl={serverLocalUrl}\n            serverExposedUrl={serverExposedUrl}\n            devMetadata={devMetadata}\n          />\n        </DevScreenBorder>\n      );\n    },\n  });\n};\n","import type { DevMetadata } from '@wix/cli-astro-definitions';\nimport type { FC } from 'react';\nimport React, { useState } from 'react';\nimport { match } from 'variant';\nimport { ScreenState } from './screen-state.js';\nimport { TunnelingConsent } from '../TunnelingConsent.js';\nimport { SiteSelectorScreen } from './SiteSelectorScreen.js';\nimport { HomeScreen } from './HomeScreen.js';\nimport { useDevCenterUpdater } from '../hooks/useDevCenterUpdater.js';\n\ninterface AppDev {\n  serverLocalUrl: string;\n  serverExposedUrl?: string;\n  devMetadata: DevMetadata | null;\n}\n\nexport const AppDev: FC<AppDev> = ({\n  serverLocalUrl,\n  serverExposedUrl,\n  devMetadata,\n}) => {\n  const [screen, setScreen] = useState<ScreenState>(ScreenState.Home());\n\n  const { tunnelRequired, devArmTag } = useDevCenterUpdater({\n    serverLocalUrl,\n    serverExposedUrl,\n    devMetadata,\n  });\n\n  return (\n    <TunnelingConsent required={tunnelRequired}>\n      {match(screen, {\n        Home: () => (\n          <HomeScreen onScreenChange={setScreen} devArmTag={devArmTag} />\n        ),\n        SiteSelector: () => <SiteSelectorScreen onScreenChange={setScreen} />,\n      })}\n    </TunnelingConsent>\n  );\n};\n","import { variant } from 'variant';\nimport type { VariantOf } from 'variant';\n\nexport const ScreenState = variant({\n  Home: {},\n  SiteSelector: {},\n});\n\nexport type ScreenState = VariantOf<typeof ScreenState>;\n","import React, { useState, useCallback } from 'react';\nimport type { FC } from 'react';\nimport { Alert, Box, PointerIcon, Text } from '@wix/cli-ui-kit';\nimport { ErrorViewer, useErrorReporter } from '@wix/cli-error-reporting';\nimport type { Site } from '@wix/site-list-client';\nimport { SiteSelector } from '@wix/cli-site-selector';\nimport { useBiLogger } from '@wix/cli-telemetry-react';\nimport { useProjectModel } from '../../../model.js';\nimport { useSite } from '../../../site/index.js';\nimport { CloseScreen } from '../../CloseScreen/index.js';\nimport { ScreenState } from './screen-state.js';\n\ninterface Props {\n  onScreenChange: (screen: ScreenState) => void;\n}\n\nexport const SiteSelectorScreen: FC<Props> = ({ onScreenChange }) => {\n  const { model } = useProjectModel();\n  const biLogger = useBiLogger();\n  const { site, setSite } = useSite();\n  const { reportError } = useErrorReporter();\n  const [error, setError] = useState<unknown>(null);\n\n  const handleError = useCallback(\n    (error: unknown) => {\n      reportError(error);\n      setError(error);\n    },\n    [reportError, setError]\n  );\n\n  const handleSubmit = useCallback(\n    async (site: Site) => {\n      try {\n        await setSite(site);\n        onScreenChange(ScreenState.Home());\n      } catch (e) {\n        handleError(e);\n      }\n    },\n    [setSite, onScreenChange, handleError]\n  );\n\n  return (\n    <Box flexDirection=\"column\" gap={1}>\n      <Box gap={1}>\n        <PointerIcon />\n        <Text>Current Development Site: {site.displayName}</Text>\n      </Box>\n      <Box flexDirection=\"column\">\n        <SiteSelector\n          appId={model.config.appId}\n          biLogger={biLogger}\n          onSubmit={handleSubmit}\n          onError={handleError}\n        />\n        {error ? (\n          <ErrorViewer\n            error={error}\n            systemErrorOverride={\n              <Alert type=\"error\">Failed to change Development Site!</Alert>\n            }\n          />\n        ) : null}\n      </Box>\n      <CloseScreen onClose={() => onScreenChange(ScreenState.Home())} />\n    </Box>\n  );\n};\n","export { CloseScreen } from './CloseScreen.js';\n","import React from 'react';\nimport type { FC } from 'react';\nimport { Key, Text, useInput } from '@wix/cli-ui-kit';\nimport { useWixCliAppBi } from '../../bi-app/index.js';\n\ninterface Props {\n  onClose: () => void;\n}\n\nexport const CloseScreen: FC<Props> = ({ onClose }) => {\n  const bi = useWixCliAppBi();\n\n  useInput((_, key) => {\n    if (key.escape) {\n      bi.cliAction({\n        question: 'Press to close',\n        questionKey: 'general.close_screen',\n        action: 'close',\n        key: 'esc',\n      });\n      onClose();\n    }\n  });\n\n  return (\n    <Text skin=\"secondary\">\n      Press\n      <Key value=\"esc\" skin=\"secondary\" />\n      to close\n    </Text>\n  );\n};\n","import React from 'react';\nimport type { FC } from 'react';\nimport process from 'node:process';\nimport { Box, Text, Spinner } from '@wix/cli-ui-kit';\nimport { useSite } from '../../../site/index.js';\nimport type { ScreenState } from './screen-state.js';\nimport { PlatformLink } from '../../PlatformLink/PlatformLink.js';\nimport { LivesiteLinkForApp } from '../../PreviewCommand/app-flow/LivesiteLinkForApp.js';\nimport { SwitchSite } from './SwitchSite.js';\nimport { EditorLink } from '../../PlatformLink/EditorLink.js';\n\ninterface HomeScreenProps {\n  onScreenChange: (screen: ScreenState) => void;\n  devArmTag?: string;\n}\n\nexport const HomeScreen: FC<HomeScreenProps> = ({\n  onScreenChange,\n  devArmTag,\n}) => {\n  const { site } = useSite();\n\n  return (\n    <>\n      <Box gap={1}>\n        <Text>Current Dev Site:</Text>\n        <Text bold skin=\"info\">\n          {site.displayName}\n        </Text>\n        {process.stdin.isTTY && <SwitchSite onScreenChange={onScreenChange} />}\n      </Box>\n\n      <Box paddingTop={1} paddingBottom={1} flexDirection=\"column\">\n        <Text>Open the preview on:</Text>\n        <Box paddingLeft={2} flexDirection=\"column\">\n          {devArmTag ? (\n            <>\n              <LivesiteLinkForApp armTag={devArmTag} />\n              <EditorLink armTag={devArmTag} />\n              <PlatformLink\n                url={`https://manage.wix.com/dashboard/${site.id}?apps-override=${devArmTag}`}\n                label={'Dashboard'}\n              />\n            </>\n          ) : (\n            <Spinner text=\"Preparing your dashboard...\" />\n          )}\n        </Box>\n      </Box>\n    </>\n  );\n};\n","import React from 'react';\nimport type { FC } from 'react';\nimport { Text, useInput, Key } from '@wix/cli-ui-kit';\nimport { ScreenState } from './screen-state.js';\nimport { useWixCliAppBi } from '../../../bi-app/index.js';\n\nexport const SwitchSite: FC<{\n  onScreenChange: (screen: ScreenState) => void;\n}> = ({ onScreenChange }) => {\n  const bi = useWixCliAppBi();\n\n  useInput(async (input) => {\n    if (input === 'c') {\n      bi.cliAction({\n        question: 'Switch Dev Site',\n        questionKey: 'dev_command.dev_site.change',\n        action: 'change_site',\n        key: input,\n      });\n      onScreenChange(ScreenState.SiteSelector());\n    }\n  });\n\n  return (\n    <Text skin=\"secondary\">\n      (Press <Key value=\"C\" skin=\"secondary\" /> to switch)\n    </Text>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAAA,IAAAA,iBAAkD;;;ACAlD;AAIO,IAAM,aAAa;AACnB,IAAM,uBAAuB;AAE7B,SAAS,YAAY;AAAA,EAC1B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAKG;AACD,QAAM,aAAa,CAAC,SAAS,KAAK;AAElC,MAAI,MAAM;AACR,eAAW,KAAK,UAAU,GAAG,IAAI,EAAE;AAAA,EACrC;AAEA,MAAI,cAAc;AAChB,eAAW,KAAK,mBAAmB,YAAY;AAAA,EACjD;AAEA,QAAM,EAAE,MAAM,KAAK,IAAI,eAAe,gBAAgB,UAAU;AAEhE,QAAM,SAAS,MAAM,MAAM,MAAM;AAAA,IAC/B,KAAK;AAAA,IACL,OAAO;AAAA,IACP,KAAK,EAAE,aAAa,IAAI;AAAA,IACxB,SAAS;AAAA,IACT,aAAa;AAAA,EACf,CAAC;AAED,MAAI,eAAe;AAEnB,SAAO,QAAQ,GAAG,QAAQ,CAAC,UAAU;AACnC,oBAAgB,MAAM,SAAS;AAC/B,UAAM,QAAQ,aAAa,MAAM,IAAI;AAErC,mBAAe,MAAM,IAAI,KAAK;AAC9B,eAAW,QAAQ,OAAO;AACxB,aAAO,QAAQ,KAAK,YAAY,IAAI;AACpC,UAAI,KAAK,SAAS,SAAS,GAAG;AAC5B,cAAMC,SAAQ,oBAAoB,KAAK,IAAI;AAC3C,YAAIA,SAAQ,CAAC,GAAG;AACd,gBAAM,UAAU,UAAUA,OAAM,CAAC,CAAC,EAAE,KAAK;AACzC,iBAAO,QAAQ,KAAK,sBAAsB,OAAO;AAAA,QACnD;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAC;AAED,MAAI,eAAe;AAEnB,SAAO,QAAQ,GAAG,QAAQ,CAAC,UAAU;AACnC,oBAAgB,MAAM,SAAS;AAC/B,UAAM,QAAQ,aAAa,MAAM,IAAI;AAErC,mBAAe,MAAM,IAAI,KAAK;AAC9B,eAAW,QAAQ,OAAO;AACxB,aAAO,QAAQ,KAAK,YAAY,IAAI;AAAA,IACtC;AAAA,EACF,CAAC;AAED,SAAO;AACT;;;ACtEA;AAAA,mBAAkB;AAQlB,IAAM,iBAAiB,IAAI,KAAK,eAAe,CAAC,GAAG;AAAA,EACjD,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,QAAQ;AACV,CAAC;AAEM,SAAS,kBAAkB,aAAa,MAAc;AAC3D,QAAM,WAAW,uBAAuB,EAAE,WAAW,MAAM,CAAC;AAC5D,QAAM,MAAM,CAAC,QAA+B;AAC1C,QAAI,OAAO,QAAQ,UAAU;AAE3B,iBAAW,MAAM,QAAQ,IAAI,GAAG,GAAG,CAAC;AAAA,IACtC,OAAO;AAEL,iBAAW,MAAM,QAAQ,IAAI,SAAS,OAAO,GAAG,CAAC,GAAG,CAAC;AAAA,IACvD;AAAA,EACF;AAEA,QAAM,cAAc,CAAC,QAA+B;AAClD,UAAM,YAAY,eAAe,OAAO,oBAAI,KAAK,CAAC;AAClD,UAAMC,OACJ,6BAAAC,QAAA,cAAC,YACC,6BAAAA,QAAA,cAAC,YAAM,WAAU,GAAC,GAClB,6BAAAA,QAAA,cAAC,QAAK,MAAK,UAAO,QAAM,GACxB,6BAAAA,QAAA,cAAC,YAAM,GAAI,CACb;AAIF,YAAQ,IAAI,SAAS,OAAOD,IAAG,CAAC;AAAA,EAClC;AAEA,SAAO,aAAa,EAAE,KAAK,YAAY,IAAI,EAAE,IAAI;AACnD;;;AC1CA;AAIO,SAAS,sBAAsB;AACpC,QAAM,OAAO,cAAc,EAAE,MAAM,aAAa,CAAC;AAEjD,SAAO,iBAAiB,OAAO,GAAG,mBAA2B;AAC3D,UAAM,MAAM,IAAI,IAAI,2BAA2B,cAAc;AAC7D,QAAI;AACF,YAAM,EAAE,KAAK,IAAI,MAAM,KAAK,IAAI,IAAI,SAAS,CAAC;AAC9C,aAAO;AAAA,QACL,aAAa,kBAAkB,MAAM,IAAI;AAAA,QACzC;AAAA,MACF;AAAA,IACF,QAAQ;AACN,aAAO;AAAA,QACL,aAAa;AAAA,QACb;AAAA,MACF;AAAA,IACF;AAAA,EACF,CAAC;AACH;;;ACtBA;AAAA,IAAAE,gBAAkB;AAMlB,IAAAC,kBAAsB;;;ACNtB;AAAA,IAAAC,gBAAkB;AAIX,IAAM,kBAA+C,CAAC,EAAE,SAAS,MAAM;AAC5E,SACE,8BAAAC,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,eAAc;AAAA,MACd,WAAS;AAAA,MACT,YAAY;AAAA,MACZ,cAAc;AAAA,MACd,aAAa;AAAA,MACb,aAAY;AAAA,MACZ,aAAY;AAAA,MACZ,OAAM;AAAA;AAAA,IAEL;AAAA,EACH;AAEJ;;;ACnBA;AAAA,IAAAC,gBAAkB;;;ACAlB;AACA,IAAAC,gBAAkE;AAClE,qBAAwC;AAFxC,SAAS,yBAAyB;;;ACAlC;AAAA,IAAAC,gBAA4B;;;ACA5B;AAOO,SAAS,iBAAiB,aAA+B;AAC9D,aAAW,aAAa,YAAY,YAAY;AAC9C,UAAM,mBAAmB,4BAA4B,SAAS;AAE9D,QACE,oBAAoB,QACpB,iBAAiB,aAAa,cAAc,SAC5C;AAIA,aAAO,CAAC,IAAI,SAAS,iBAAiB,SAAS,QAAQ,WAAW;AAAA,IACpE;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,4BAA4B,mBAAuC;AAC1E,QAAM,oBAAoB,qBAAqB,UAAU,iBAAiB;AAE1E,MAAI,kBAAkB,OAAO;AAC3B,WAAO;AAAA,EACT;AAEA,SAAO,kBAAkB;AAC3B;;;AD3BO,SAAS,sBAAsB;AACpC,QAAM,OAAO,cAAc,EAAE,MAAM,aAAa,CAAC;AAEjD,aAAO;AAAA,IACL,OACE,gBACA,aACA,SACA,cACG;AACH,YAAM,MAAM,IAAI,IAAI,2BAA2B,cAAc;AAC7D,YAAM,EAAE,MAAM,KAAK,IAAI,MAAM,KAAK,IAAY,IAAI,SAAS,GAAG;AAAA,QAC5D,cAAc;AAAA,QACd,cAAc;AAAA,UACZ,mBAAmB;AAAA,UACnB,mBAAmB;AAAA,UACnB,qBAAqB;AAAA,QACvB;AAAA,QACA,mBAAmB;AAAA,MACrB,CAAC;AAED,UAAI,eAAe,MAAM;AACvB,cAAM,eAAe,oBAAI,IAAoB;AAE7C,qBAAa,IAAI,YAAY,uBAAuB,OAAO;AAC3D,qBAAa,IAAI,YAAY,sBAAsB,SAAS;AAE5D,eAAO;AAAA,UACL,UAAU,sBAAsB,MAAM,YAAY;AAAA,UAClD,kBAAkB,KAAK,SAAS,YAAY,oBAAoB;AAAA,QAClE;AAAA,MACF;AAEA,YAAM,aAAa,sBAAsB,IAAI;AAE7C,aAAO;AAAA,QACL,UAAU;AAAA,QACV,kBAAkB,iBAAiB,UAAU;AAAA,MAC/C;AAAA,IACF;AAAA,IACA,CAAC,IAAI;AAAA,EACP;AACF;;;AD9BA,IAAM,4BAAwB,wBAAQ;AAAA,EACpC,aAAS,uBAAmC;AAAA,EAC5C,WAAW,CAAC;AACd,CAAC;AAEM,IAAM,sBAAsB,CAAC;AAAA,EAClC;AAAA,EACA;AAAA,EACA;AACF,MAIM;AACJ,QAAM,CAAC,WAAW,YAAY,QAAI,wBAA6B;AAC/D,QAAM,CAAC,UAAU,WAAW,QAAI,wBAAkC,IAAI;AACtE,QAAM,kBAAkB,YAAY;AACpC,QAAM,qBAAqB,sBAAsB;AAEjD,QAAM;AAAA,IACJ,OAAO;AAAA,MACL,QAAQ,EAAE,OAAO,YAAY;AAAA,MAC7B;AAAA,IACF;AAAA,EACF,IAAI,gBAAgB;AAEpB,QAAM,aAAS,uBAAQ,MAAM,kBAAkB,GAAG,CAAC,CAAC;AACpD,QAAM,EAAE,eAAe,IAAI,kBAAkB;AAC7C,QAAM,MAAM,aAAa;AACzB,QAAM,2BAA2B,4BAA4B;AAE7D,QAAM,aAAa,UAAU;AAC7B,QAAM,gBAAY,sBAAe;AACjC,QAAM,CAAC,gBAAgB,iBAAiB,QAAI,wBAAS,KAAK;AAE1D,QAAM,mBAAmB,oBAAoB;AAE7C,QAAM,sBAAkB,2BAAY,YAAY;AAC9C,UAAM,UAAU,oBAAoB;AAEpC,UAAM,EAAE,UAAU,gBAAgB,kBAAAC,kBAAiB,IACjD,MAAM;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA,MACA,UAAU,WAAW;AAAA,IACvB;AAEF,QAAI,kBAAkB,UAAU,cAAc,GAAG;AAC/C,aAAO,sBAAsB,UAAU;AAAA,IACzC;AAEA,QAAI,CAAC,oBAAoB,CAAC,UAAU,WAAWA,mBAAkB;AAC/D,YAAM,SAAS,MAAM,eAAe;AACpC,UAAI,CAAC,OAAO,WAAW;AACrB,0BAAkB,IAAI;AACtB,eAAO,sBAAsB,UAAU;AAAA,MACzC;AAEA,YAAM,kBAAkB,SAAS,IAAI,IAAI,cAAc,EAAE,MAAM,EAAE;AACjE,YAAM,SAAS,MAAM,WAAW,eAAe;AAC/C,gBAAU,UAAU,OAAO;AAE3B,aAAO,sBAAsB,UAAU;AAAA,IACzC;AAEA,UAAM,YAAY,MAAM,cAAc,aAAa;AAEnD,QAAI,mBAAmB,WAAW;AAClC,QAAI,CAAC,kBAAkB;AACrB,yBAAmB,MAAM,IAAI;AAAA,QAC3B,eAAe,gBAAgB,SAAS,UAAU,OAAO;AAAA,QACzD;AAAA,MACF;AAAA,IACF,OAAO;AACL,YAAM,cAAc,MAAM,IAAI;AAAA,QAC5B,eAAe,gBAAgB,SAAS,UAAU,OAAO;AAAA,QACzD;AAAA,MACF;AACA,UAAI,KAAC,uBAAO,aAAa,YAAY,GAAG;AACtC,2BAAmB,MAAM,IAAI;AAAA,UAC3B,eAAe,gBAAgB,SAAS,UAAU,OAAO;AAAA,UACzD;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAEA,QAAI,qBAAqB,WAAW,WAAW;AAC7C,YAAM,cAAc,eAAe,EAAE,WAAW,iBAAiB,CAAC;AAAA,IACpE;AAEA,gBAAY,cAAc;AAC1B,iBAAa,gBAAgB;AAE7B,UAAM,yBAAyB,QAAQ;AAAA,MACrC,SACE,gBAAgB,SACZ,UACA,mBAAmB;AAAA,QACjB,cAAc,aAAa,KAAK;AAAA,QAChC,QAAQ;AAAA,MACV,CAAC;AAAA,MACP,QAAQ;AAAA,MACR,aAAa;AAAA,IACf,CAAC;AAED,UAAM,gBACJ,CAAC,CAAC,WAAW,aAAa,qBAAqB,UAAU;AAC3D,WAAO,sBAAsB,QAAQ,EAAE,cAAc,CAAC;AAAA,EACxD,GAAG;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,QAAM,CAAC,OAAO,QAAQ,QAAI,wBAAS,KAAK,IAAI,CAAC;AAE7C,+BAAU,MAAM;AACd,QAAI,WAAW;AAEf,SAAK,gBAAgB,EAClB,KAAK,CAAC,WAAW;AAChB,cAAI,uBAAO,QAAQ,SAAS,GAAG;AAC7B,eAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF;AAAA,IACF,CAAC,EACA,MAAM,CAAC,UAAmB;AAEzB,aAAO,IAAI,+BAA+B;AAC1C,aAAO,IAAI,GAAG,KAAK,EAAE;AAErB,sBAAgB,KAAK;AAAA,IACvB,CAAC,EACA,KAAK,MAAM;AACV,UAAI,CAAC,UAAU;AACb,mBAAW,MAAM,SAAS,KAAK,IAAI,CAAC,GAAG,GAAK;AAAA,MAC9C;AAAA,IACF,CAAC;AACH,WAAO,MAAM;AACX,iBAAW;AAAA,IACb;AAAA,EAEF,GAAG,CAAC,KAAK,CAAC;AAEV,SAAO,EAAE,gBAAgB,UAAU;AACrC;;;AG/KA;AAAA,IAAAC,gBAAgC;AAEhC,IAAAC,kBAAsB;AASf,IAAM,mBAA8B,CAAC,EAAE,UAAU,SAAS,MAAM;AACrE,QAAM,OAAO,QAAQ;AACrB,QAAM,CAAC,UAAU,WAAW,QAAI,wBAAkB;AAElD,QAAM,EAAE,OAAO,IAAI,SAAS,YAAY;AACtC,UAAM,SAAS,MAAM,eAAe;AAEpC,QAAI,OAAO,WAAW;AACpB,kBAAY,IAAI;AAAA,IAClB;AAEA,WAAO;AAAA,EACT,GAAG,CAAC,CAAC;AAEL,MAAI,CAAC,YAAY,UAAU;AACzB,WAAO;AAAA,EACT;AAEA,SACE,8BAAAC,QAAA,4BAAAA,QAAA,oBACG,uBAAM,QAAQ;AAAA,IACb,SAAS,MACP,8BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC,OACE;AAAA,QAEF,cAAc;AAAA,QACd,UAAU,OAAOC,cAAa;AAC5B,sBAAYA,SAAQ;AACpB,gBAAM,iBAAiB,EAAE,WAAWA,UAAS,CAAC;AAC9C,cAAI,CAACA,WAAU;AACb,iBAAK;AAAA,UACP;AAAA,QACF;AAAA;AAAA,IACF;AAAA,IAEF,OAAO,MAAM;AAAA,IACb,SAAS,MAAM;AAAA,EACjB,CAAC,GACA,aAAa,SACZ,8BAAAD,QAAA,cAAC,QAAK,MAAK,WAAQ,oEAEnB,CAEJ;AAEJ;;;AJ1CO,IAAM,UAA4B,CAAC;AAAA,EACxC;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,QAAM,EAAE,KAAK,IAAI,QAAQ;AACzB,QAAM,EAAE,gBAAgB,UAAU,IAAI,oBAAoB;AAAA,IACxD;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,SACE,8BAAAE,QAAA,4BAAAA,QAAA,gBACE,8BAAAA,QAAA,cAAC,YAAK,+BAA6B,GACnC,8BAAAA,QAAA,cAAC,eAAI,QAAQ,GAAG,SAAS,GAAG,eAAc,YACxC,8BAAAA,QAAA,cAAC,oBAAiB,UAAU,kBAC1B,8BAAAA,QAAA,cAAC,YAAK,sBAAoB,GAC1B,8BAAAA,QAAA,cAAC,eAAI,aAAa,GAAG,eAAc,YACjC,8BAAAA,QAAA,cAAC,gBAAa,KAAK,gBAAgB,OAAO,QAAQ,GACjD,YACC,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,oCAAoC,KAAK,EAAE,kBAAkB,SAAS;AAAA,MAC3E,OAAO;AAAA;AAAA,EACT,IAEA,8BAAAA,QAAA,cAAC,WAAQ,MAAM,+BAA+B,CAElD,CACF,CACF,CACF;AAEJ;;;AF7BO,IAAM,cAAsC,CAAC;AAAA,EAClD;AAAA,EACA;AACF,MAAM;AACJ,QAAM,EAAE,KAAK,IAAI,QAAQ;AACzB,SACE,8BAAAC,QAAA,cAAC,oBAAiB,QAAQ,KAAK,UAC5B,uBAAM,mBAAmB;AAAA,IACxB,cAAc,MAAM,8BAAAA,QAAA,cAAC,WAAQ,MAAK,+BAA8B;AAAA,IAChE,OAAO,MAAM;AAAA,IACb,SAAS,MAAM,8BAAAA,QAAA,cAAC,WAAQ,MAAK,wCAAuC;AAAA,IACpE,SAAS,CAAC,EAAE,QAAQ,EAAE,aAAa,eAAe,EAAE,MAClD,8BAAAA,QAAA,cAAC,uBACC,8BAAAA,QAAA;AAAA,MAAC;AAAA;AAAA,QACC;AAAA,QACA;AAAA,QACA;AAAA;AAAA,IACF,CACF;AAAA,EAEJ,CAAC,CACH;AAEJ;;;AO1CA;AAAA,IAAAC,iBAAkB;AAElB,IAAAC,kBAAsB;;;ACFtB;AAEA,IAAAC,iBAAgC;AAChC,IAAAC,kBAAsB;;;ACHtB;AAAA,IAAAC,kBAAwB;AAGjB,IAAM,kBAAc,yBAAQ;AAAA,EACjC,MAAM,CAAC;AAAA,EACP,cAAc,CAAC;AACjB,CAAC;;;ACND;AAAA,IAAAC,gBAA6C;;;ACA7C;;;ACAA;AAAA,IAAAC,gBAAkB;AASX,IAAM,cAAyB,CAAC,EAAE,QAAQ,MAAM;AACrD,QAAM,KAAK,eAAe;AAE1B,oBAAS,CAAC,GAAG,QAAQ;AACnB,QAAI,IAAI,QAAQ;AACd,SAAG,UAAU;AAAA,QACX,UAAU;AAAA,QACV,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,KAAK;AAAA,MACP,CAAC;AACD,cAAQ;AAAA,IACV;AAAA,EACF,CAAC;AAED,SACE,8BAAAC,QAAA,cAAC,QAAK,MAAK,eAAY,SAErB,8BAAAA,QAAA,cAAC,OAAI,OAAM,OAAM,MAAK,aAAY,GAAE,UAEtC;AAEJ;;;AFfO,IAAM,qBAAgC,CAAC,EAAE,eAAe,MAAM;AACnE,QAAM,EAAE,MAAM,IAAI,gBAAgB;AAClC,QAAM,WAAW,YAAY;AAC7B,QAAM,EAAE,MAAM,QAAQ,IAAI,QAAQ;AAClC,QAAM,EAAE,YAAY,IAAI,iBAAiB;AACzC,QAAM,CAAC,OAAO,QAAQ,QAAI,wBAAkB,IAAI;AAEhD,QAAM,kBAAc;AAAA,IAClB,CAACC,WAAmB;AAClB,kBAAYA,MAAK;AACjB,eAASA,MAAK;AAAA,IAChB;AAAA,IACA,CAAC,aAAa,QAAQ;AAAA,EACxB;AAEA,QAAM,mBAAe;AAAA,IACnB,OAAOC,UAAe;AACpB,UAAI;AACF,cAAM,QAAQA,KAAI;AAClB,uBAAe,YAAY,KAAK,CAAC;AAAA,MACnC,SAAS,GAAG;AACV,oBAAY,CAAC;AAAA,MACf;AAAA,IACF;AAAA,IACA,CAAC,SAAS,gBAAgB,WAAW;AAAA,EACvC;AAEA,SACE,8BAAAC,QAAA,cAAC,eAAI,eAAc,UAAS,KAAK,KAC/B,8BAAAA,QAAA,cAAC,eAAI,KAAK,KACR,8BAAAA,QAAA,cAAC,iBAAY,GACb,8BAAAA,QAAA,cAAC,YAAK,8BAA2B,KAAK,WAAY,CACpD,GACA,8BAAAA,QAAA,cAAC,eAAI,eAAc,YACjB,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,OAAO,MAAM,OAAO;AAAA,MACpB;AAAA,MACA,UAAU;AAAA,MACV,SAAS;AAAA;AAAA,EACX,GACC,QACC,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA,qBACE,8BAAAA,QAAA,cAAC,SAAM,MAAK,WAAQ,oCAAkC;AAAA;AAAA,EAE1D,IACE,IACN,GACA,8BAAAA,QAAA,cAAC,eAAY,SAAS,MAAM,eAAe,YAAY,KAAK,CAAC,GAAG,CAClE;AAEJ;;;AGpEA;AAAA,IAAAC,iBAAkB;AAElB,OAAO,aAAa;;;ACFpB;AAAA,IAAAC,iBAAkB;AAMX,IAAM,aAER,CAAC,EAAE,eAAe,MAAM;AAC3B,QAAM,KAAK,eAAe;AAE1B,oBAAS,OAAO,UAAU;AACxB,QAAI,UAAU,KAAK;AACjB,SAAG,UAAU;AAAA,QACX,UAAU;AAAA,QACV,aAAa;AAAA,QACb,QAAQ;AAAA,QACR,KAAK;AAAA,MACP,CAAC;AACD,qBAAe,YAAY,aAAa,CAAC;AAAA,IAC3C;AAAA,EACF,CAAC;AAED,SACE,+BAAAC,QAAA,cAAC,QAAK,MAAK,eAAY,WACd,+BAAAA,QAAA,cAAC,OAAI,OAAM,KAAI,MAAK,aAAY,GAAE,aAC3C;AAEJ;;;ADZO,IAAM,aAAkC,CAAC;AAAA,EAC9C;AAAA,EACA;AACF,MAAM;AACJ,QAAM,EAAE,KAAK,IAAI,QAAQ;AAEzB,SACE,+BAAAC,QAAA,6BAAAA,QAAA,gBACE,+BAAAA,QAAA,cAAC,eAAI,KAAK,KACR,+BAAAA,QAAA,cAAC,YAAK,mBAAiB,GACvB,+BAAAA,QAAA,cAAC,QAAK,MAAI,MAAC,MAAK,UACb,KAAK,WACR,GACC,QAAQ,MAAM,SAAS,+BAAAA,QAAA,cAAC,cAAW,gBAAgC,CACtE,GAEA,+BAAAA,QAAA,cAAC,eAAI,YAAY,GAAG,eAAe,GAAG,eAAc,YAClD,+BAAAA,QAAA,cAAC,YAAK,sBAAoB,GAC1B,+BAAAA,QAAA,cAAC,eAAI,aAAa,GAAG,eAAc,YAChC,YACC,+BAAAA,QAAA,6BAAAA,QAAA,gBACE,+BAAAA,QAAA,cAAC,sBAAmB,QAAQ,WAAW,GACvC,+BAAAA,QAAA,cAAC,cAAW,QAAQ,WAAW,GAC/B,+BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,oCAAoC,KAAK,EAAE,kBAAkB,SAAS;AAAA,MAC3E,OAAO;AAAA;AAAA,EACT,CACF,IAEA,+BAAAA,QAAA,cAAC,WAAQ,MAAK,+BAA8B,CAEhD,CACF,CACF;AAEJ;;;ALnCO,IAAM,SAAqB,CAAC;AAAA,EACjC;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,QAAM,CAAC,QAAQ,SAAS,QAAI,yBAAsB,YAAY,KAAK,CAAC;AAEpE,QAAM,EAAE,gBAAgB,UAAU,IAAI,oBAAoB;AAAA,IACxD;AAAA,IACA;AAAA,IACA;AAAA,EACF,CAAC;AAED,SACE,+BAAAC,QAAA,cAAC,oBAAiB,UAAU,sBACzB,uBAAM,QAAQ;AAAA,IACb,MAAM,MACJ,+BAAAA,QAAA,cAAC,cAAW,gBAAgB,WAAW,WAAsB;AAAA,IAE/D,cAAc,MAAM,+BAAAA,QAAA,cAAC,sBAAmB,gBAAgB,WAAW;AAAA,EACrE,CAAC,CACH;AAEJ;;;ADtBO,IAAM,aAAoC,CAAC;AAAA,EAChD;AAAA,EACA;AACF,MAAM;AACJ,aAAO,uBAAM,mBAAmB;AAAA,IAC9B,cAAc,MAAM,+BAAAC,QAAA,cAAC,WAAQ,MAAK,+BAA8B;AAAA,IAChE,OAAO,MAAM;AAAA,IACb,SAAS,MAAM,+BAAAA,QAAA,cAAC,WAAQ,MAAK,wCAAuC;AAAA,IACpE,SAAS,CAAC,EAAE,QAAQ,EAAE,aAAa,eAAe,EAAE,MAAM;AACxD,aACE,+BAAAA,QAAA,cAAC,uBACC,+BAAAA,QAAA;AAAA,QAAC;AAAA;AAAA,UACC;AAAA,UACA;AAAA,UACA;AAAA;AAAA,MACF,CACF;AAAA,IAEJ;AAAA,EACF,CAAC;AACH;;;AXfO,IAAM,aAAkC,CAAC;AAAA,EAC9C;AAAA,EACA;AAAA,EACA;AACF,MAAM;AACJ,QAAM;AAAA,IACJ,OAAO,EAAE,QAAQ,cAAc;AAAA,EACjC,IAAI,gBAAgB;AAEpB,QAAM,aAAS,wBAAQ,MAAM,kBAAkB,KAAK,GAAG,CAAC,CAAC;AAEzD,QAAM,mBAAe,uBAAuC;AAE5D,QAAM,yBAAyB,oBAAoB;AAEnD,WAAS,YAAY;AACnB,UAAM,WAAW,MAAM,YAAY,aAAa;AAChD,UAAM,iBAAiB,MAAM,qBAAqB,QAAQ;AAE1D,UAAM,QAAQ,YAAY;AAAA,MACxB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAED,iBAAa,UAAU;AAEvB,UAAM,QAAQ,KAAK,sBAAsB,CAAC,YAAoB;AAC5D,WAAK,uBAAuB,QAAQ,OAAO;AAAA,IAC7C,CAAC;AAED,UAAM,QAAQ,GAAG,YAAY,CAAC,SAAiB,OAAO,IAAI,IAAI,CAAC;AAC/D,UAAM,QAAQ,GAAG,YAAY,CAAC,SAAiB,OAAO,IAAI,IAAI,CAAC;AAAA,EACjE,GAAG,CAAC,CAAC;AAEL,gCAAU,MAAM;AACd,WAAO,MAAM;AACX,UAAI,aAAa,SAAS,KAAK;AAC7B,YAAI;AACF,uBAAa,QAAQ,KAAK,SAAS;AAAA,QACrC,QAAQ;AAAA,QAGR;AAAA,MACF;AAAA,IACF;AAAA,EACF,GAAG,CAAC,CAAC;AAEL,SACE,+BAAAC,QAAA,cAAC,oBACE,OAAO,gBAAgB,SACtB,+BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,mBAAmB,uBAAuB;AAAA,MAC1C;AAAA;AAAA,EACF,IAEA,+BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC,mBAAmB,uBAAuB;AAAA,MAC1C;AAAA;AAAA,EACF,CAEJ;AAEJ;","names":["import_react","match","log","React","import_react","import_variant","import_react","React","import_react","import_react","import_react","isTunnelRequired","import_react","import_variant","React","approved","React","React","import_react","import_variant","import_react","import_variant","import_variant","import_react","import_react","React","error","site","React","import_react","import_react","React","React","React","React","React"]}